# Библиотека BIM компонентов


<div style="max-width: 67%;">
<p>Библиотека компонентов <i>evoslib</i> представляет собой коллекцию элементов, предназначенных для использования в программном комплексе <b>nanoCAD BIM Вентиляция</b>.</p>
</div>


<img src="./git/readme/base.png" alt="Библиотека компонентов" style="width: 60%;">

 <div style="max-width: 67%;">
<p>Эта библиотека включает в себя различные компоненты, специально разработанные для проектирования систем вентиляции. Основная цель библиотеки — предоставить пользователям удобные и готовые к использованию элементы для проектирования и моделирования вентиляционных систем.</p>
</div>

## Доступ к библиотеке

Библиотека компонентов доступна на GitHub Pages по адресу: [https://nanoib.github.io/evoslib/](https://nanoib.github.io/evoslib/).

GitHub Pages — это сервис, предоставляемый GitHub для хостинга статических веб-страниц прямо из репозиториев GitHub.


## Структура проекта

Проект организован в несколько основных директорий и файлов:
### Файлы веб-страницы библиотеки
- **index.html**: Основная веб-страница проекта, служащая в качестве стартовой страницы для пользователей.
- **script.js**: JavaScript-скрипт, используемый для улучшения веб-интерфейса проекта или предоставления дополнительной функциональности.
- **styles.css**: CSS-стили, применяемые к веб-интерфейсу проекта, обеспечивая его консистентный и визуально привлекательный вид.
### Хранение и подготовка данных
- **db**: Содержит файлы данных, такие как `Base.json`, `Base.xlsx`. Эти файлы являются источниками данных для проекта. 
В `Base.xlsx` администратор библиотеки вносит данные, получаемые от производителей оборудования - названия компонентов и их параметры.
Из `Base.json` происходит чтение данных при отрисовке веб-страницы. 
- **im**: Содержит изображения, связанные с библиотекой. Эти изображения представляют собой скриншоты компонентов из программы.
- **pyscripts**: Содержит Python-скрипты, которые помогают администрировать базу данных. Каждый скрипт со вспомогательными файлами находится в своей папке: `cropwhite`, `rename`, и `xlsxtojson`.


## Описание script.js

Файл `script.js` отвечает за интерактивность и функциональность веб-интерфейса библиотеки компонентов. Он включает в себя следующие основные функции:

- **Фильтрация компонентов**: Скрипт позволяет пользователям фильтровать компоненты по различным категориям, таким как "Категория сайта", "Производитель", "Тип графики" и "Форма". Это реализовано с помощью динамического обновления содержимого фильтров и сетки компонентов на основе выбранных пользователем параметров.
- **Сброс фильтров**: Кнопка "Сбросить все" позволяет пользователям быстро сбросить все примененные фильтры и вернуть отображение всех доступных компонентов.
- **Динамическое обновление интерфейса**: Скрипт обеспечивает обновление интерфейса в реальном времени, что делает взаимодействие с библиотекой более удобным и интуитивно понятным.
- **.nojekyll**: Файл `.nojekyll` используется для отключения обработки Jekyll на GitHub Pages, что позволяет использовать произвольные файлы и директории, такие как те, которые начинаются с подчеркивания. Без этого файла скрипт `script.js` не мог прочитать файл `Base.json`. 

### Динамическое создание категорий и подкатегорий

Скрипт `script.js` автоматически создает категории и подкатегории для раздела **Категория сайта**, используемые для фильтрации. Эти категории и подкатегории динамически (то есть прямо при открытии страницы, во время работы скрипта) создаются на основании данных из `Base.json`. Таким образом, для создания новой категории оборудования *Изоляция воздуховодов* с подкатегориями *Трубчатая изоляция* и *Листовая изоляция*, администратору базы данных достаточно добавить в файл `Base.xlsx` две новых строчки с данными компонентов: столбец `siteCategory` у обоих должен быть заполнен *Изоляция воздуховодов*, а столбец `technicalCategory` заполнен *Трубчатая изоляция* для первого и *Листовая изоляция* для второго компонента. Далее разместить в папке **im** изображения для компонентов и запустить скрипт **xlsxtojson.py**. 

И все!

## Описание python-скриптов
- **cropwhite**: Скрипт `cropwhite.py` предназначен для обработки изображений компонентов. Он выполняет обрезку изображений, удаляя лишние белые поля вокруг компонентов, и добавляет белую границу заданного размера для достижения нужного соотношения сторон изображений. Это помогает стандартизировать внешний вид изображений компонентов в библиотеке.
- **rename**: Скрипт `rename.py` используется для переименования файлов изображений компонентов. Эта необходимость возникает в связи с необходимостью ручного создания скриншотов (при этом трудно проконтролировать консистентность), но желанием иметь унифицированные имена изображений. В данный момент унифицированный код изображений задается в `Base.xlsx`, далее вручную переносится в текстовый файл перед запуском данного скрипта.
- **xlsxtojson**: Скрипт `xlsxtojson.py` отвечает за преобразование данных из Excel файла (`Base.xlsx`) в формат JSON (`Base.json`). Это необходимо для того, чтобы данные о компонентах могли быть легко использованы на веб-странице библиотеки для отображения и фильтрации.

## Проблемы проекта

Проект имеет недостатки, которые могут повлиять на его эффективность и удобство использования:

- **Проблемы при большом количестве компонентов**: При увеличении количества компонентов в библиотеке, производительность скрипта `script.js` может значительно снизиться. Это может привести к замедлению работы веб-интерфейса и ухудшению пользовательского опыта.

- **Отсутствие индивидуальной страницы для каждого компонента**: В текущей реализации отсутствует возможность просмотра детальной информации о каждом компоненте на отдельной странице. Это ограничивает пользователей в получении полной информации о компонентах.

- **Отсутствие ссылок на скачивание каждого компонента индивидуально**: В проекте нет возможности скачивания отдельных компонентов напрямую с веб-страницы. Это может затруднить процесс получения необходимых компонентов пользователями.

Имеются планы на исправление недостатков.

## Дорожная карта

Проект не имеет дорожной карты.