# Библиотека BIM компонентов


<div style="max-width: 67%;">
<p>Библиотека компонентов <i>evoslib</i> это коллекция элементов, предназначенных для использования в программном комплексе <b>nanoCAD BIM Вентиляция</b>.</p>
</div>


<img src="./git/readme/base.png" alt="Библиотека компонентов" style="width: 60%;">

 <div style="max-width: 67%;">
<p>Эта библиотека включает в себя компоненты, специально разработанные для проектирования систем вентиляции и кондиционирования. Основная цель библиотеки — предоставить пользователю готовые к использованию компоненты для проектирования и моделирования вентиляционных систем.</p>
</div>

## Доступ к библиотеке

Библиотека компонентов доступна на GitHub Pages по адресу: [https://nanoib.github.io/evoslib/](https://nanoib.github.io/evoslib/).

GitHub Pages — это сервис, предоставляемый GitHub для хостинга статических веб-страниц прямо из репозиториев GitHub.


## Структура проекта

Проект организован в несколько основных директорий и файлов:
### Файлы веб-страницы библиотеки
- **index.html**: Файл с разметкой веб-страницы проекта. Размещает основные элементы веб-страницы: заголовок, шапка, боковая секция фильтра, хранит теги для поисковика. Загружает `script.js`.
- **script.js**: JavaScript-скрипт, используемый для улучшения веб-интерфейса проекта и предоставления дополнительной функциональности.
- **styles.css**: CSS-стили, применяемые к веб-интерфейсу библиотеки, обеспечивая визуально привлекательный вид.
### Хранение и подготовка данных
- **db**: Содержит файлы данных: `Base.json`, `Base.xlsx`. Эти файлы являются источниками данных для проекта. 

    В `Base.xlsx` администратор библиотеки вносит данные, получаемые от производителей оборудования: названия компонентов, их категорию, типоразмеры и другую информацию о них, а также имена скриншотов.
    Из `Base.json` происходит чтение данных при отрисовке веб-страницы. 
- **im**: Содержит изображения компонентов. Это скриншоты из программы.
- **pyscripts**: Содержит Python-скрипты, помогающие администрировать базу данных. Каждый скрипт со вспомогательными файлами находится в своей папке: `cropwhite`, `rename`, и `xlsxtojson`.


## Описание script.js

Файл `script.js` отвечает за функциональность веб-интерфейса библиотеки. Он реализует такие функции:

- **Фильтрация компонентов**: Скрипт позволяет пользователям фильтровать компоненты по различным категориям, таким как "Категория сайта", "Производитель", "Тип графики" и "Форма". 

    Фильтры внутри каждой из категорий работают по принципу ИЛИ (т.е. выбрав двух производителей, вы увидите компоненты каждого из двух производителей), а фильтры различных категорий работают по принципу И (т.е. добавив к тем фильтрам по производителям еще и фильтры из других категорий, например "Тип графики" = *Параметрическая графика* и "Форма" = *Круглый*, вы увидите только круглые и параметрические компоненты именно этих производителей).
- **Сброс фильтров**: Кнопка "Сбросить все" позволяет пользователям быстро сбросить все примененные фильтры и вернуть отображение всех доступных компонентов.
- **Динамическое обновление интерфейса**: Скрипт обеспечивает обновление интерфейса в реальном времени, что делает взаимодействие с библиотекой более удобным и интуитивно понятным.
- **.nojekyll**: Файл `.nojekyll` используется для отключения обработки Jekyll на GitHub Pages, что позволяет использовать произвольные файлы и директории. Не ясно, почему это необходимо, но без этого файла скрипт `script.js` не мог прочитать файл `Base.json`. 

### Динамическое создание категорий и подкатегорий

Скрипт `script.js` автоматически создает категории и подкатегории фильтрации для разделов "Категория сайта", "Производитель", "Тип графики" и "Форма". Эти категории и подкатегории динамически (то есть прямо при открытии страницы, во время работы скрипта) создаются на основании данных из `Base.json`. 

Таким образом, например, для создания новой категории оборудования *Изоляция воздуховодов* с подкатегориями *Трубчатая изоляция* и *Листовая изоляция*, администратору базы данных достаточно добавить в файл `Base.xlsx` две новых строчки с данными компонентов: столбец `siteCategory` у обоих должен быть заполнен *Изоляция воздуховодов*, а столбец `technicalCategory` заполнен *Трубчатая изоляция* для первого и *Листовая изоляция* для второго компонента. Далее разместить в папке **im** изображения для компонентов и запустить скрипт **xlsxtojson.py**. 

И все!

## Описание python-скриптов
- **cropwhite**: Скрипт `cropwhite.py` предназначен для обработки изображений компонентов. Он выполняет обрезку скриншотов, удаляя лишние белые поля вокруг компонентов, и добавляет белую границу заданного размера для достижения нужного соотношения сторон изображений. Это помогает стандартизировать внешний вид изображений компонентов в библиотеке.
- **rename**: Скрипт `rename.py` используется для переименования файлов изображений компонентов. Эта необходимость возникает в связи с необходимостью ручного создания скриншотов (при этом трудно проконтролировать консистентность), но желанием иметь унифицированные имена изображений. В данный момент унифицированный код изображений задается в `Base.xlsx`, далее вручную переносится в текстовый файл перед запуском `rename.py`.
- **xlsxtojson**: Скрипт `xlsxtojson.py` преобразует данные из Excel файла (`Base.xlsx`) в формат JSON (`Base.json`). Это необходимо для того, чтобы данные о компонентах могли быть легко использованы в `script.js`.

Все скрипты можно запускать двойным кликом из Проводника Windows.

## Проблемы проекта

Проект имеет недостатки, которые могут повлиять на его эффективность и удобство использования:

- **Проблемы при большом количестве компонентов**: При увеличении количества компонентов в библиотеке, производительность скрипта `script.js` может значительно снизиться. Это может привести к замедлению работы веб-интерфейса и ухудшению пользовательского опыта.

- **Отсутствие индивидуальной страницы для каждого компонента**: В текущей реализации отсутствует возможность просмотра детальной информации о каждом компоненте на отдельной странице. Это ограничивает пользователей в получении полной информации о компонентах.

- **Отсутствие ссылок на скачивание каждого компонента индивидуально**: В проекте нет возможности скачивания отдельных компонентов напрямую с веб-страницы. Это может затруднить процесс получения необходимых компонентов пользователями.

Имеются планы на исправление недостатков.

## Дорожная карта

Проект не имеет дорожной карты.